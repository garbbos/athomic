var openDB=(function(){var h={},b=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDb||window.msIndexedDB,d=function(i,m){var l,j;try{j=i.openCursor();j.onsuccess=function(n){l=n.target.result;if(l){window.console.log(JSON.stringify(l.value));m(l.value);l["continue"]()}else{return}};j.onerror=function(n){m("OpenDB: Error no data");return false}}catch(k){m("OpenDB: Read DB failed. "+k.message)}},c=function(i,l,m){var j;try{j=i.get(l);j.onsuccess=function(n){window.console.log("OpenDB: Search... "+j.result.name);m(j.result);return true};j.onerror=function(n){m("Error: get "+n.message);return false}}catch(k){m("OpenDB: Read record failed. "+k.message)}},g=function(i,k){try{b.deleteDatabase(i)}catch(j){k("OpenDB: Error "+j.message)}},e=function(i,l,m){var k;try{k=i.add(l).onsuccess=function(n){m("OpenDB: Add record "+JSON.stringify(l.name)+" success.");return true}}catch(j){m("OpenDB: ADD record failed. "+j.message);return false}},a=function(i,l,m){var j;try{j=i["delete"](l);j.onsuccess=function(n){m("OpenDB: "+l+"  is Deleted.");return true};j.onerror=function(n){m("OpenDB: Error "+l+"  is not Deleted.");return false}}catch(k){m("OpenDB: ADD record failed. "+k.message);return false}},f=function(j,m,n){var i,k;try{k=j.get(m.name);k.onsuccess=function(o){i=k.result;window.console.log("OpenDB: Update "+JSON.stringify(m.name));if(i){var p;for(p in m){if(m.hasOwnProperty(p)){if(p!=="name"){i[p]=m[p];window.console.log("OpenDB: Update "+i[p])}}}j.put(i).onsuccess=function(q){n("OpenDB: Update record: UPDATE "+i.name)}}};k.onerror=function(o){j.add(i).onsuccess=function(p){n("OpenDB: Update record: ADD "+i.name)}}}catch(l){n("OpenDB: ADD record failed. "+l.message)}};h.open=function(i,n,p,k){var q,m,l,o;try{m=b.open(i.NAME,i.VERSION);m.onerror=function(r){window.console.log("OpenDB: open... request.onerror "+r.message);return};m.onupgradeneeded=function(r){q=r.target.result;if(!q.objectStoreNames.contains("clientes")){window.console.log("OpenDB: not exists clientes");o=q.createObjectStore("clientes",{keyPath:"name"})}};m.onsuccess=function(r){window.console.log("OpenDB: open... request.onsuccess...");q=r.target.result;l=q.transaction("clientes","readwrite");o=l.objectStore("clientes");if(k==="read"){d(o,p)}if(k==="get"){c(o,n,p)}if(k==="add"){e(o,n,p)}if(k==="update"){f(o,n,p)}if(k==="delete"){a(o,n,p)}if(k==="deleteDB"){g(i.NAME,p)}}}catch(j){p("OpenDB: Error open DB. "+j.message);return}};return{odb:h}}());