var openDB=(function(){var h={},b=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDb||window.msIndexedDB,d=function(i,m){var l,j;try{j=i.openCursor();j.onsuccess=function(n){l=n.target.result;if(l){m(l.value);l["continue"]()}else{return}};j.onerror=function(n){m("Error no data");return}}catch(k){m("Read DB failed. "+k.message)}},c=function(i,l,m){var j;try{j=i.get(l);j.onsuccess=function(n){m(j.result);return j.result};j.onerror=function(n){m("Error: get "+n.message);return}}catch(k){window.console.log("Read record failed. "+k.message)}},g=function(i,k){try{b.deleteDatabase(i)}catch(j){k("Error "+j.message)}},e=function(i,l,m){var k;try{k=i.add(l).onsuccess=function(n){m("Add record "+JSON.stringify(l.name)+" success.");return true}}catch(j){m("ADD record failed. "+j.message);return}},a=function(i,l,m){var j;try{j=i["delete"](l);j.onsuccess=function(n){m(l+"  is Deleted.");return true};j.onerror=function(n){m("Error "+l+"  is not Deleted.");return}}catch(k){m("ADD record failed. "+k.message);return}},f=function(j,m,n){var i,k;try{k=j.get(m.name);k.onsuccess=function(o){i=k.result;if(i){var p;for(p in m){if(m.hasOwnProperty(p)){if(p!=="name"){i[p]=m[p]}}}j.put(i).onsuccess=function(q){n("Update record: UPDATE "+i.name)}}};k.onerror=function(o){j.add(i).onsuccess=function(p){n("Update record: ADD "+i.name)}}}catch(l){n("ADD record failed. "+l.message)}};h.open=function(i,n,p,k){var q,m,l,o;try{m=b.open(i.NAME,i.VERSION);m.onerror=function(r){window.console.log("OpenDB: open... request.onerror "+r.message);return};m.onupgradeneeded=function(r){q=r.target.result;if(!q.objectStoreNames.contains("clientes")){o=q.createObjectStore("clientes",{keyPath:"name"})}};m.onsuccess=function(r){q=r.target.result;l=q.transaction("clientes","readwrite");o=l.objectStore("clientes");if(k==="read"){d(o,p)}if(k==="get"){c(o,n,p)}if(k==="add"){e(o,n,p)}if(k==="update"){f(o,n,p)}if(k==="delete"){a(o,n,p)}if(k==="deleteDB"){g(i.NAME,p)}}}catch(j){p("Error open DB. "+j.message);return}};return{odb:h}}());